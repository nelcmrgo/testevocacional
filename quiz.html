<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Vocacional - Etec</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&display=swap');

        body {
            font-family: 'Fredoka', sans-serif;
            background: linear-gradient(135deg, #A2B193 0%, #76886A 100%);
            color: #334155;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 1rem;
            transition: background-color 0.5s;
        }

        .quiz-card {
            background-color: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 2rem;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
            padding: 2rem;
            width: 100%;
            max-width: 600px;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: transform 0.5s, opacity 0.5s;
        }

        .pop-in { animation: popIn 0.5s forwards; }
        @keyframes popIn {
            from { transform: scale(0.9) translateY(20px); opacity: 0; }
            to { transform: scale(1) translateY(0); opacity: 1; }
        }

        .bounce { animation: bounce 0.6s forwards; animation-delay: 0.2s; }
        @keyframes bounce {
            0% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0); }
        }

        .option {
            background-color: #A2B193;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 9999px;
            cursor: pointer;
            transition: transform 0.2s, background-color 0.2s;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            font-weight: 600;
        }
        .option:hover { transform: translateY(-2px); background-color: #76886A; }
        .option:disabled { background-color: #ccc; cursor: not-allowed; transform: none; }
        
        #question-area, #result-area, #game-area, #guess-word-area, #organize-routine-area, #pre-game-area {
            display: none;
            width: 100%;
            flex-direction: column;
            align-items: center;
        }

        /* Estilos dos Jogos */
        .game-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; width: 100%; max-width: 400px; margin-top: 2rem; }
        .memory-card { width: 80px; height: 80px; position: relative; transform-style: preserve-3d; transition: transform 0.6s; cursor: pointer; box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2); border-radius: 1rem; }
        .memory-card.flipped { transform: rotateY(180deg); }
        .memory-card .card-face { width: 100%; height: 100%; position: absolute; backface-visibility: hidden; border-radius: 1rem; display: flex; justify-content: center; align-items: center; font-size: 2rem; font-weight: bold; }
        .memory-card .card-front { background-color: #A2B193; color: #fff; transform: rotateY(180deg); }
        .memory-card .card-back { background-color: #E6D8A2; }

        #word-display { display: flex; gap: 0.5rem; justify-content: center; margin-bottom: 1.5rem; }
        .letter-box { width: 40px; height: 40px; border-bottom: 4px solid #76886A; display: inline-flex; justify-content: center; align-items: center; font-size: 1.5rem; font-weight: bold; text-transform: uppercase; }
        #keyboard { display: grid; grid-template-columns: repeat(auto-fit, minmax(40px, 1fr)); gap: 0.5rem; width: 100%; max-width: 450px; margin-top: 1rem; }
        .key { background-color: #A2B193; color: white; border: none; padding: 0.75rem; border-radius: 8px; font-weight: 600; cursor: pointer; transition: background-color 0.2s; }
        .key:disabled { background-color: #ccc; cursor: not-allowed; }

        #task-list { list-style: none; padding: 0; margin-top: 1.5rem; width: 100%; max-width: 350px; }
        .task-item { background-color: #e2e8f0; padding: 1rem; margin-bottom: 0.5rem; border-radius: 8px; cursor: grab; user-select: none; transition: background-color 0.2s; border: 2px solid transparent; }
        .task-item:active { cursor: grabbing; background-color: #cbd5e1; }
        .task-item.over { border-color: #76886A; }

        /* Pr√©-jogo */
        #pre-game-area { display: flex; flex-direction: column; justify-content: center; align-items: center; min-height: 200px; }
        .pre-game-bar { width: 80%; height: 15px; background-color: #E2E8F0; border-radius: 9999px; overflow: hidden; }
        .pre-game-progress { height: 100%; background-color: #76886A; width: 0; transition: width 2s linear; }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">
    <main class="quiz-card p-8 rounded-xl shadow-2xl flex flex-col items-center pop-in">
        <!-- Telas -->
        <div id="pre-game-area">
            <h1 class="text-3xl font-bold text-gray-800 mb-4">Prepare-se!</h1>
            <p class="text-lg text-gray-600 mb-4">Um novo desafio te espera.</p>
            <div class="pre-game-bar"><div id="pre-game-progress" class="pre-game-progress"></div></div>
        </div>

        <div id="question-area">
            <div class="mb-6 text-center">
                <p id="question-number" class="text-lg font-bold text-gray-600 mb-2"></p>
                <h1 id="question-text" class="text-2xl md:text-3xl font-bold mb-4 text-gray-800"></h1>
            </div>
            <div id="options-container" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
            <div class="w-full bg-gray-200 rounded-full h-2.5 mt-6">
                <div id="progress-bar" class="bg-gray-500 h-2.5 rounded-full transition-all" style="width: 0%"></div>
            </div>
        </div>
        
        <!-- Jogo da Mem√≥ria -->
        <div id="game-area">
            <h1 class="text-3xl font-bold text-gray-800 mb-4">Jogo da Mem√≥ria!</h1>
            <p class="text-lg text-gray-600 mb-4">Encontre os pares para ganhar pontos extras!</p>
            <div id="game-grid" class="game-grid"></div>
            <p id="game-status" class="text-lg font-semibold mt-4"></p>
        </div>

        <!-- Jogo de Adivinhar a Palavra -->
        <div id="guess-word-area">
            <h1 class="text-3xl font-bold text-gray-800 mb-4">Adivinhe a Palavra!</h1>
            <p id="word-category" class="text-lg text-gray-600 mb-4"></p>
            <div id="word-display"></div>
            <div id="keyboard"></div>
            <p id="guess-word-status" class="text-lg font-semibold mt-4"></p>
        </div>

        <!-- Jogo de Organizar a Rotina -->
        <div id="organize-routine-area">
            <h1 class="text-3xl font-bold text-gray-800 mb-4">Organize a Rotina!</h1>
            <p class="text-lg text-gray-600 mb-4">Arraste as tarefas para a ordem correta de um dia produtivo.</p>
            <ul id="task-list"></ul>
            <button id="check-order-btn" class="option mt-4">Verificar Ordem</button>
            <p id="organize-routine-status" class="text-lg font-semibold mt-4"></p>
        </div>

        <!-- Resultado -->
        <div id="result-area">
            <h2 class="text-3xl md:text-4xl font-bold text-gray-800 mb-4 bounce">Parab√©ns!</h2>
            <p class="text-lg md:text-xl text-gray-600 mb-6" id="result-explanation"></p>
            <div class="w-full space-y-4">
                <div class="bg-gray-200 p-4 rounded-xl shadow-inner "><p class="text-lg font-semibold text-gray-700">Sua melhor op√ß√£o:</p><p id="result-1" class="text-xl font-bold text-gray-900 mt-1"></p></div>
                <div class="bg-gray-200 p-4 rounded-xl shadow-inner"><p class="text-lg font-semibold text-gray-700">Uma √≥tima segunda op√ß√£o:</p><p id="result-2" class="text-xl font-bold text-gray-900 mt-1"></p></div>
            </div>
            <button id="back-to-menu-button" class="mt-8 bg-gray-500 text-white font-bold py-3 px-6 rounded-full shadow-lg">Voltar ao In√≠cio</button>
        </div>
    </main>

    <script>
        const quizData = [
            // Bloco 1
            { question: "Qual atividade voc√™ prefere no seu tempo livre?", options: [ { text: "Criar conte√∫do para redes sociais ou um blog.", profile: "COM" }, { text: "Organizar eventos ou participar de projetos.", profile: "NEG" }, { text: "Montar ou programar rob√¥s e computadores.", profile: "TEC" }, { text: "Aprender sobre o corpo humano e biologia.", profile: "SAU" } ] },
            { question: "Se voc√™ pudesse ter um superpoder, qual seria?", options: [ { text: "Habilidade de se comunicar com qualquer pessoa.", profile: "COM" }, { text: "Vis√£o de neg√≥cios para identificar oportunidades.", profile: "NEG" }, { text: "Controle sobre a tecnologia e m√°quinas.", profile: "TEC" }, { text: "Poder de curar doen√ßas.", profile: "SAU" } ] },
            { question: "Em um projeto de grupo, qual papel voc√™ assume?", options: [ { text: "O comunicador, que apresenta as ideias.", profile: "COM" }, { text: "O l√≠der, que organiza e delega tarefas.", profile: "NEG" }, { text: "O t√©cnico, que resolve os problemas complexos.", profile: "TEC" }, { text: "O cuidador, que se preocupa com a equipe.", profile: "SAU" } ] },
            { question: "Qual tipo de filme ou s√©rie voc√™ mais gosta?", options: [ { text: "Document√°rios sobre cultura e sociedade.", profile: "COM" }, { text: "S√©ries sobre empreendedorismo e finan√ßas.", profile: "NEG" }, { text: "Fic√ß√£o cient√≠fica com alta tecnologia.", profile: "TEC" }, { text: "Dramas m√©dicos ou sobre supera√ß√£o.", profile: "SAU" } ] },
            { question: "Se voc√™ fosse um animal, qual seria?", options: [ { text: "Um papagaio, pois √© comunicativo.", profile: "COM" }, { text: "Uma formiga, pois trabalha em equipe.", profile: "NEG" }, { text: "Um polvo, por ser inteligente e se adaptar.", profile: "TEC" }, { text: "Um golfinho, pois ajuda outros seres.", profile: "SAU" } ] },
            // Bloco 2
            { question: "Qual tipo de desafio voc√™ gosta de resolver?", options: [ { text: "Convencer algu√©m de uma ideia.", profile: "COM" }, { text: "Negociar um bom acordo.", profile: "NEG" }, { text: "Corrigir um erro em um c√≥digo ou sistema.", profile: "TEC" }, { text: "Ajudar algu√©m com um problema pessoal.", profile: "SAU" } ] },
            { question: "Em uma feira de profiss√µes, qual estande te atrairia?", options: [ { text: "Marketing ou Rela√ß√µes P√∫blicas.", profile: "COM" }, { text: "Administra√ß√£o ou Log√≠stica.", profile: "NEG" }, { text: "Desenvolvimento de Sistemas ou Web Design.", profile: "TEC" }, { text: "Enfermagem ou Seguran√ßa do Trabalho.", profile: "SAU" } ] },
            { question: "Qual habilidade t√©cnica voc√™ gostaria de aprender?", options: [ { text: "Orat√≥ria e apresenta√ß√£o.", profile: "COM" }, { text: "Planejamento financeiro.", profile: "NEG" }, { text: "Linguagem de programa√ß√£o.", profile: "TEC" }, { text: "Primeiros socorros.", profile: "SAU" } ] },
            { question: "Qual palavra te descreve melhor?", options: [ { text: "Criativo(a).", profile: "COM" }, { text: "Organizado(a).", profile: "NEG" }, { text: "L√≥gico(a).", profile: "TEC" }, { text: "Emp√°tico(a).", profile: "SAU" } ] },
            { question: "O que te inspira?", options: [ { text: "Uma boa conversa ou um discurso.", profile: "COM" }, { text: "Uma empresa de sucesso.", profile: "NEG" }, { text: "A inova√ß√£o tecnol√≥gica.", profile: "TEC" }, { text: "Hist√≥rias de supera√ß√£o humana.", profile: "SAU" } ] },
            // Bloco 3 - Novas perguntas
            { question: "Como voc√™ prefere aprender algo novo?", options: [ { text: "Lendo e escrevendo sobre o assunto.", profile: "COM" }, { text: "Analisando estudos de caso e exemplos pr√°ticos.", profile: "NEG" }, { text: "Experimentando e testando na pr√°tica.", profile: "TEC" }, { text: "Observando e ajudando algu√©m experiente.", profile: "SAU" } ] },
            { question: "Qual ambiente de trabalho parece mais atraente?", options: [ { text: "Uma ag√™ncia de publicidade movimentada.", profile: "COM" }, { text: "Um escrit√≥rio corporativo bem estruturado.", profile: "NEG" }, { text: "Um laborat√≥rio de tecnologia ou uma startup.", profile: "TEC" }, { text: "Um hospital, cl√≠nica ou espa√ßo de cuidado.", profile: "SAU" } ] },
            { question: "Seu smartphone √© principalmente para...", options: [ { text: "Comunicar-se e usar redes sociais.", profile: "COM" }, { text: "Organizar tarefas e gerenciar finan√ßas.", profile: "NEG" }, { text: "Explorar novas tecnologias e apps.", profile: "TEC" }, { text: "Monitorar sa√∫de e bem-estar.", profile: "SAU" } ] },
            { question: "Qual problema mundial voc√™ gostaria de resolver?", options: [ { text: "A falta de comunica√ß√£o e entendimento entre povos.", profile: "COM" }, { text: "A inefici√™ncia e o desperd√≠cio de recursos.", profile: "NEG" }, { text: "A barreira de acesso √† tecnologia e informa√ß√£o.", profile: "TEC" }, { text: "A falta de acesso √† sa√∫de de qualidade.", profile: "SAU" } ] },
            { question: "Em um jogo de tabuleiro, voc√™ √© quem...", options: [ { text: "Explica as regras para todo mundo.", profile: "COM" }, { text: "Cria a melhor estrat√©gia para vencer.", profile: "NEG" }, { text: "Encontra uma brecha nas regras para inovar.", profile: "TEC" }, { text: "Garante que todos estejam se divertindo.", profile: "SAU" } ] },
            // Bloco 4 - Novas Perguntas
            { question: "Qual mat√©ria escolar era sua preferida?", options: [ { text: "Portugu√™s ou Artes.", profile: "COM" }, { text: "Matem√°tica ou Geografia.", profile: "NEG" }, { text: "F√≠sica ou Inform√°tica.", profile: "TEC" }, { text: "Biologia ou Qu√≠mica.", profile: "SAU" } ] },
            { question: "O que voc√™ valoriza mais em um trabalho?", options: [ { text: "A chance de expressar minhas ideias.", profile: "COM" }, { text: "A possibilidade de crescimento e lideran√ßa.", profile: "NEG" }, { text: "A oportunidade de criar e inovar.", profile: "TEC" }, { text: "O sentimento de estar ajudando os outros.", profile: "SAU" } ] },
            { question: "Qual tipo de ferramenta voc√™ mais gosta de usar?", options: [ { text: "Editores de texto e imagem.", profile: "COM" }, { text: "Planilhas e softwares de gest√£o.", profile: "NEG" }, { text: "Ferramentas de programa√ß√£o e hardware.", profile: "TEC" }, { text: "Equipamentos m√©dicos ou de laborat√≥rio.", profile: "SAU" } ] },
            { question: "Ao planejar uma viagem, o que √© mais importante?", options: [ { text: "O roteiro cultural e os pontos de intera√ß√£o.", profile: "COM" }, { text: "O or√ßamento e a log√≠stica do transporte.", profile: "NEG" }, { text: "Os gadgets e apps que vou usar para me guiar.", profile: "TEC" }, { text: "A seguran√ßa e o bem-estar de todos no grupo.", profile: "SAU" } ] },
            { question: "Para voc√™, sucesso √©...", options: [ { text: "Ser reconhecido por suas ideias.", profile: "COM" }, { text: "Alcan√ßar metas e ter estabilidade.", profile: "NEG" }, { text: "Construir algo que ningu√©m nunca fez.", profile: "TEC" }, { text: "Fazer a diferen√ßa na vida das pessoas.", profile: "SAU" } ] },
        ];
        
        const courseMapping = {
            'COM': ['Marketing', 'Recursos Humanos'],
            'NEG': ['Administra√ß√£o', 'Com√©rcio Exterior', 'Log√≠stica', 'Servi√ßos Jur√≠dicos'],
            'TEC': ['Desenvolvimento de Sistemas', 'Inform√°tica para Internet'],
            'SAU': ['Cuidados de Idosos', 'Seguran√ßa do Trabalho']
        };

        const profileDescriptions = {
            'COM': 'Seu perfil de **Comunica√ß√£o** √© ideal para quem gosta de interagir, expressar ideias e usar a criatividade para influenciar pessoas.',
            'NEG': 'Seu perfil de **Neg√≥cios** √© para quem tem vis√£o estrat√©gica, gosta de planejar, liderar e alcan√ßar resultados pr√°ticos.',
            'TEC': 'Seu perfil de **Tecnologia** √© para quem tem um pensamento l√≥gico, adora resolver problemas complexos e tem interesse em programa√ß√£o e inova√ß√£o.',
            'SAU': 'Seu perfil de **Sa√∫de** √© para quem tem empatia, se preocupa com o bem-estar dos outros e busca carreiras que envolvam cuidado e assist√™ncia.'
        };
        
        let currentQuestionIndex = 0;
        let scores = { 'COM': 0, 'NEG': 0, 'TEC': 0, 'SAU': 0 };
        const elements = {};
        const screenIds = ['question-area', 'result-area', 'game-area', 'guess-word-area', 'organize-routine-area', 'pre-game-area'];

        function showScreen(screenId) {
            screenIds.forEach(id => {
                const screen = document.getElementById(id);
                if (screen) screen.style.display = 'none';
            });
            const targetScreen = document.getElementById(screenId);
            if (targetScreen) {
                targetScreen.style.display = 'flex';
                targetScreen.classList.remove('pop-in');
                void targetScreen.offsetWidth;
                targetScreen.classList.add('pop-in');
            }
        }
        
        function showQuestion() {
            if (currentQuestionIndex >= quizData.length) {
                showResult();
                return;
            }
            showScreen('question-area');
            const question = quizData[currentQuestionIndex];
            elements.questionNumber.innerText = `Pergunta ${currentQuestionIndex + 1} de ${quizData.length}`;
            elements.questionText.innerText = question.question;
            elements.optionsContainer.innerHTML = '';
            question.options.forEach(option => {
                const button = document.createElement('button');
                button.innerText = option.text;
                button.className = 'option';
                button.onclick = () => handleAnswer(option.profile);
                elements.optionsContainer.appendChild(button);
            });
            updateProgressBar();
        }

        function handleAnswer(profile) {
            scores[profile]++;
            currentQuestionIndex++;
            const gameTriggers = { 5: 'memory-game', 10: 'guess-word', 15: 'organize-routine' };
            const gameType = gameTriggers[currentQuestionIndex];
            if (gameType) {
                showPreGame(gameType);
            } else {
                showQuestion();
            }
        }
        
        function updateProgressBar() {
            if (elements.progressBar) {
                const progress = (currentQuestionIndex / quizData.length) * 100;
                elements.progressBar.style.width = `${progress}%`;
            }
        }
        
        function showPreGame(gameType) {
            showScreen('pre-game-area');
            elements.preGameProgress.style.width = '0';
            setTimeout(() => { elements.preGameProgress.style.width = '100%'; }, 50);
            setTimeout(() => {
                const gameFunctions = {
                    'memory-game': showMemoryGame,
                    'guess-word': showGuessWordGame,
                    'organize-routine': showOrganizeRoutineGame
                };
                gameFunctions[gameType]();
            }, 2000);
        }

        let firstCard, secondCard, lockBoard, matchedPairs;
        function showMemoryGame() {
            showScreen('game-area');
            elements.gameGrid.innerHTML = '';
            matchedPairs = 0;
            lockBoard = false;
            firstCard = secondCard = null;
            const emojis = ['üé®', 'üß†', '‚öôÔ∏è', 'üìà', '‚öñÔ∏è', '‚ù§Ô∏è'].flatMap(e => [e, e]).sort(() => 0.5 - Math.random());
            emojis.forEach(emoji => {
                const card = document.createElement('div');
                card.className = 'memory-card';
                card.innerHTML = `<div class="card-face card-front">${emoji}</div><div class="card-face card-back"></div>`;
                card.addEventListener('click', flipCard);
                elements.gameGrid.appendChild(card);
            });
            elements.gameStatus.textContent = 'Encontre os 6 pares!';
        }
        function flipCard(event) {
            const clickedCard = event.currentTarget;
            if (lockBoard || clickedCard === firstCard || clickedCard.classList.contains('flipped')) return;
            clickedCard.classList.add('flipped');
            if (!firstCard) {
                firstCard = clickedCard;
                return;
            }
            secondCard = clickedCard;
            lockBoard = true;
            if (firstCard.innerText === secondCard.innerText) {
                matchedPairs++;
                scores['TEC']++;
                elements.gameStatus.textContent = `Par encontrado! (${matchedPairs}/6)`;
                firstCard.removeEventListener('click', flipCard);
                secondCard.removeEventListener('click', flipCard);
                firstCard = secondCard = null;
                lockBoard = false;
                if (matchedPairs === 6) {
                    elements.gameStatus.textContent = 'Excelente! Continue o quiz.';
                    setTimeout(showQuestion, 2000);
                }
            } else {
                setTimeout(() => {
                    firstCard.classList.remove('flipped');
                    secondCard.classList.remove('flipped');
                    firstCard = secondCard = null;
                    lockBoard = false;
                }, 1200);
            }
        }
        
        const words = [ { word: 'MARKETING', category: '√Årea: Comunica√ß√£o', profile: 'COM' }, { word: 'SISTEMAS', category: '√Årea: Tecnologia', profile: 'TEC' }, { word: 'LOGISTICA', category: '√Årea: Neg√≥cios', profile: 'NEG' }, { word: 'CUIDADOS', category: '√Årea: Sa√∫de', profile: 'SAU' }];
        let currentWord, guessedLetters;
        function showGuessWordGame() {
            const wordData = words[Math.floor(Math.random() * words.length)];
            currentWord = wordData.word;
            guessedLetters = new Set();
            showScreen('guess-word-area');
            elements.wordCategory.textContent = wordData.category;
            elements.guessWordStatus.textContent = '';
            drawWordDisplay();
            drawKeyboard();
        }
        function drawWordDisplay() {
            elements.wordDisplay.innerHTML = currentWord.split('').map(letter => `<div class="letter-box">${guessedLetters.has(letter) ? letter : ''}</div>`).join('');
        }
        function drawKeyboard() {
            elements.keyboard.innerHTML = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('').map(key => `<button class="key">${key}</button>`).join('');
            elements.keyboard.querySelectorAll('.key').forEach(btn => btn.onclick = handleKeyPress);
        }
        function handleKeyPress(e) {
            const letter = e.target.textContent;
            e.target.disabled = true;
            if (currentWord.includes(letter)) {
                currentWord.split('').forEach(l => { if (l === letter) guessedLetters.add(l) });
                drawWordDisplay();
                if (currentWord.split('').every(l => guessedLetters.has(l))) {
                    scores[words.find(w=>w.word === currentWord).profile]++;
                    elements.guessWordStatus.textContent = 'Palavra correta! +1 Ponto.';
                    disableKeyboard();
                    setTimeout(showQuestion, 2000);
                }
            } else {
                elements.guessWordStatus.textContent = `Letra errada!`;
            }
        }
        function disableKeyboard() {
            elements.keyboard.querySelectorAll('.key').forEach(btn => btn.disabled = true);
        }

        const correctOrder = ['Acordar e se arrumar', 'Tomar caf√© da manh√£', 'Ir para o trabalho/estudo', 'Almo√ßar', 'Concluir tarefas', 'Relaxar um pouco', 'Jantar'];
        let draggedItem = null;
        function showOrganizeRoutineGame() {
            showScreen('organize-routine-area');
            elements.organizeRoutineStatus.textContent = '';
            elements.checkOrderBtn.disabled = false;
            const shuffledTasks = [...correctOrder].sort(() => Math.random() - 0.5);
            elements.taskList.innerHTML = '';
            shuffledTasks.forEach(taskText => {
                const li = document.createElement('li');
                li.className = 'task-item';
                li.textContent = taskText;
                li.draggable = true;
                elements.taskList.appendChild(li);
            });
            addDragListeners();
        }
        function addDragListeners() {
            const tasks = elements.taskList.querySelectorAll('.task-item');
            tasks.forEach(task => {
                task.addEventListener('dragstart', (e) => { draggedItem = e.target; setTimeout(() => e.target.style.opacity = '0.5', 0); });
                task.addEventListener('dragend', (e) => { e.target.style.opacity = '1'; draggedItem = null; });
                task.addEventListener('dragover', e => e.preventDefault());
                task.addEventListener('drop', (e) => { e.preventDefault(); if (e.target.classList.contains('task-item') && e.target !== draggedItem) { const allItems = [...elements.taskList.children]; const draggedIndex = allItems.indexOf(draggedItem); const targetIndex = allItems.indexOf(e.target); if (draggedIndex > targetIndex) { e.target.before(draggedItem); } else { e.target.after(draggedItem); } } });
            });
        }
        function checkTaskOrder() {
            const currentOrder = [...elements.taskList.querySelectorAll('.task-item')].map(li => li.textContent);
            if (JSON.stringify(currentOrder) === JSON.stringify(correctOrder)) {
                scores['NEG']++;
                elements.organizeRoutineStatus.textContent = 'Ordem correta! +1 Ponto de organiza√ß√£o.';
                elements.checkOrderBtn.disabled = true;
                setTimeout(showQuestion, 2000);
            } else {
                elements.organizeRoutineStatus.textContent = 'Ordem incorreta. Tente novamente!';
            }
        }

        function showResult() {
            showScreen('result-area');
            const sortedScores = Object.entries(scores).sort((a, b) => b[1] - a[1]);
            const [topProfile, secondProfile] = [sortedScores[0][0], sortedScores[1][0]];
            const getRandomCourse = (profile) => courseMapping[profile][Math.floor(Math.random() * courseMapping[profile].length)];
            elements.result1.innerText = getRandomCourse(topProfile);
            elements.result2.innerText = getRandomCourse(secondProfile);
            elements.resultExplanation.innerHTML = `Com base nas suas respostas, seu perfil √© mais forte em <strong>${profileDescriptions[topProfile].split('**')[1]}</strong> e <strong>${profileDescriptions[secondProfile].split('**')[1]}</strong>.<br><br>${profileDescriptions[topProfile].replace(/\*\*/g, '')}<br><br>${profileDescriptions[secondProfile].replace(/\*\*/g, '')}`;
        }
        
        document.addEventListener('DOMContentLoaded', () => {
            const allElementIds = [
                'question-number', 'question-text', 'options-container', 'progress-bar', 
                'game-grid', 'game-status', 
                'word-category', 'word-display', 'keyboard', 'guess-word-status', 
                'task-list', 'check-order-btn', 'organize-routine-status', 
                'result-explanation', 'result-1', 'result-2', 'back-to-menu-button', 
                'pre-game-progress'
            ];
            allElementIds.forEach(id => {
                const camelCaseId = id.replace(/-(\w)/g, (m, p1) => p1.toUpperCase());
                elements[camelCaseId] = document.getElementById(id);
            });
            
            if (elements.backToMenuButton) elements.backToMenuButton.onclick = () => window.location.href = './index.html';
            if (elements.checkOrderBtn) elements.checkOrderBtn.onclick = checkTaskOrder;
            
            showQuestion();
        });
    </script>
</body>
</html>

